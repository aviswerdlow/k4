# K4 Uniqueness AND Gate Re-Confirmation Report
## Date: 2025-09-03

## Executive Summary

Successfully implemented and executed the AND gate confirmation pipeline as specified in the runbook. The pipeline enforces strict AND logic requiring candidates to pass **both** Flint v2 semantic validation **and** Generic track with tightened thresholds (top 1% perplexity, POS ≥ 1.0).

**Key Finding**: None of the 4 candidates (IS_REAL, IS_TRUE, IS_FACT, IS_A_MAP) passed the AND gate. All candidates failed the Generic track's strict thresholds despite 3 of 4 passing Flint v2 semantic requirements.

## Implementation Details

### Phrase Gate Policy (AND Logic)
```json
{
  "combine": "AND",
  "tokenization_v2": true,
  "flint_v2": {
    "declination_patterns": ["SET COURSE TRUE", ...],
    "instrument_verbs": ["READ", "SEE", "NOTE", "SIGHT", "OBSERVE"],
    "min_content_words": 6,
    "max_repeat_non_anchor": 2
  },
  "generic": {
    "percentile_top": 1,
    "pos_threshold": 1.0,
    "min_content_words": 6,
    "max_repeat": 2
  }
}
```

### Tokenization v2 Implementation
- Head window: indices 0..74 (P[74]='T')
- No inferred splits (e.g., "THEJOY" remains single token)
- Tokens touching index 74 count once as head tokens
- Seam tokens (75..96) ignored for phrase gating

## Results by Candidate

| Candidate | Near-Gate | Flint v2 | Generic | AND Result | Nulls Run |
|-----------|-----------|----------|---------|------------|-----------|
| baseline_IS_REAL | ✅ Pass | ✅ Pass | ❌ Fail | ❌ Fail | No |
| alt_IS_TRUE | ✅ Pass | ❌ Fail | ❌ Fail | ❌ Fail | No |
| alt_IS_FACT | ✅ Pass | ✅ Pass | ❌ Fail | ❌ Fail | No |
| alt_IS_A_MAP | ✅ Pass | ✅ Pass | ❌ Fail | ❌ Fail | No |

### Failure Analysis

**Flint v2 Results**:
- 3 of 4 passed (IS_REAL, IS_FACT, IS_A_MAP)
- All found declination pattern: "SET THE COURSE TRUE"
- All found instrument verb: "READ" after declination
- All satisfied content requirements (≥6 words, ≤2 repeats)
- IS_TRUE failed due to modified text structure affecting pattern detection

**Generic Track Failures** (all candidates):
- Perplexity percentile: All exceeded 1% threshold
- POS trigram score: All below 1.0 threshold
- The strict thresholds (top 1% and POS ≥1.0) eliminated all candidates

## Pipeline Components

### Files Generated per Candidate
1. `plaintext_97.txt` - Candidate plaintext
2. `near_gate_report.json` - Near-gate validation results
3. `phrase_gate_policy.json` - AND gate configuration
4. `phrase_gate_report.json` - Detailed phrase gate results
5. `coverage_report.json` - Comprehensive validation summary
6. `hashes.txt` - SHA-256 hashes of all files

### Summary Files
1. `uniqueness_confirm_summary.json` - Final verdict and all results
2. `MANIFEST.sha256` - Complete file manifest with hashes
3. `AND_GATE_REPORT.md` - This report

## Uniqueness Verdict

```json
{
  "unique": false,
  "reason": "no_AND_passers"
}
```

Since no candidates passed the AND gate, we cannot determine uniqueness. The pipeline correctly identified that all candidates fail when requiring both semantic validity (Flint v2) AND statistical naturalness (Generic with strict thresholds).

## Next Steps

As specified in the runbook, when no candidates pass the AND gate, options include:

1. **Expand to Faraday's shortlist** (cand_001 through cand_010)
   - Test additional candidates with same AND gate criteria
   
2. **Relax Generic thresholds slightly**:
   - Perplexity: top 1% → top 2%
   - POS threshold: 1.0 → 0.95
   - This would allow marginally less natural text to pass

3. **Consider alternative approaches**:
   - Review whether the strict AND requirement is necessary
   - Analyze why Generic track is failing universally
   - Consider if the calibration data accurately represents expected K4 plaintext

## Technical Validation

✅ All required components implemented:
- Rails validation (length, anchors, tail guard)
- Near-gate (coverage ≥0.85, f-words ≥8, has_verb)
- Phrase gate with AND logic
- Tokenization v2 (head-only, no inferred splits)
- Flint v2 semantics (all patterns checked)
- Generic track (perplexity and POS with strict thresholds)
- Holm nulls ready (not run due to no AND passers)
- Complete output structure per runbook

## Conclusion

The AND gate implementation successfully enforces the strict requirement that candidates must pass both semantic (Flint v2) and statistical (Generic) validation. The current result of no passers suggests either:

1. The true K4 solution differs from these candidates
2. The Generic thresholds are too strict for this cipher domain
3. Additional candidates from Faraday's expanded set may pass

The pipeline is ready to test additional candidates or operate with relaxed thresholds as directed.

---
*Generated by K4 AND Gate Confirmation Pipeline v1.0*