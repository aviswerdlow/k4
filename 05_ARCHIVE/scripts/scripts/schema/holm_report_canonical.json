{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://k4/schema/holm_report_canonical.json",
  "oneOf": [
    {
      "type": "object",
      "additionalProperties": false,
      "required": ["schema_version", "K", "metrics", "publishable"],
      "properties": {
        "schema_version": {"type": "string", "enum": ["1.0.0"]},
        "K": {"type": "integer", "minimum": 10000},
        "metrics": {
          "type": "object",
          "additionalProperties": false,
          "required": ["coverage", "f_words"],
          "properties": {
            "coverage": {
              "type": "object",
              "additionalProperties": false,
              "required": ["p_raw", "p_holm"],
              "properties": {
                "p_raw": {"type": "number", "minimum": 0, "maximum": 1},
                "p_holm": {"type": "number", "minimum": 0, "maximum": 1}
              }
            },
            "f_words": {
              "type": "object",
              "additionalProperties": false,
              "required": ["p_raw", "p_holm"],
              "properties": {
                "p_raw": {"type": "number", "minimum": 0, "maximum": 1},
                "p_holm": {"type": "number", "minimum": 0, "maximum": 1}
              }
            }
          }
        },
        "publishable": {"type": "boolean"}
      }
    },
    {
      "type": "object",
      "additionalProperties": false,
      "required": ["schema_version", "status", "reason"],
      "properties": {
        "schema_version": {"type": "string", "enum": ["1.0.0"]},
        "status": {"const": "not_run"},
        "reason": {
          "type": "string",
          "enum": ["phrase_gate_failed", "resource_limit", "not_applicable"]
        }
      }
    }
  ]
}
