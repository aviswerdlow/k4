{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Anchor Perturbations CSV Schema",
  "description": "Schema for validating anchor_perturbations RESULTS.csv",
  "type": "array",
  "items": {
    "type": "object",
    "required": [
      "scenario_id",
      "east_start",
      "ne_start",
      "berlin_start",
      "clock_start",
      "berlin_clock_mode",
      "feasible",
      "optionA_ok",
      "wheels_solved",
      "pt_sha256",
      "matches_winner_pt",
      "tail_str",
      "families_json",
      "L_json",
      "phase_json",
      "seed_u64",
      "runtime_ms"
    ],
    "properties": {
      "scenario_id": {
        "type": "string",
        "pattern": "^PERT_\\d{3}$"
      },
      "east_start": {
        "type": "integer",
        "minimum": 0,
        "maximum": 96
      },
      "ne_start": {
        "type": "integer",
        "minimum": 0,
        "maximum": 96
      },
      "berlin_start": {
        "type": "integer",
        "minimum": 0,
        "maximum": 96
      },
      "clock_start": {
        "type": "integer",
        "minimum": 0,
        "maximum": 96
      },
      "berlin_clock_mode": {
        "type": "string",
        "enum": ["SPLIT", "COMBINED"]
      },
      "feasible": {
        "type": "boolean"
      },
      "optionA_ok": {
        "type": "boolean"
      },
      "wheels_solved": {
        "type": "boolean"
      },
      "pt_sha256": {
        "type": "string",
        "pattern": "^([a-f0-9]{64})?$"
      },
      "matches_winner_pt": {
        "type": "boolean"
      },
      "tail_str": {
        "type": "string",
        "pattern": "^[A-Z]{0,22}$"
      },
      "families_json": {
        "type": "string"
      },
      "L_json": {
        "type": "string"
      },
      "phase_json": {
        "type": "string"
      },
      "seed_u64": {
        "type": "integer",
        "minimum": 0
      },
      "runtime_ms": {
        "type": "integer",
        "minimum": 0
      }
    }
  }
}